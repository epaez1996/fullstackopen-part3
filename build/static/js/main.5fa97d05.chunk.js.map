{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","components/ErrorNoti.js","App.js","index.js"],"names":["Filter","value","onChange","PersonForm","onSubmit","onNumberChange","onNameChange","numberValue","nameValue","type","Persons","person","handleDeleteButton","name","number","onClick","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Notification","successMessage","className","ErrorNoti","errorMessage","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterName","setFilterName","setErrorMessage","setSuccessMessage","useEffect","personService","initialPerson","catch","err","console","log","personsToShow","filter","toLowerCase","includes","event","target","preventDefault","newPerson","found","find","window","confirm","returnedPerson","map","error","setTimeout","concat","forEach","alert","p","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5fa97d05.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n    return (\r\n        <div>filter shown with <input value={value} onChange={onChange}/></div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ onSubmit, onNumberChange, onNameChange, numberValue, nameValue }) => {\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <div>name:<input value={nameValue} onChange={onNameChange}/></div>\r\n            <div>number:<input value={numberValue} onChange={onNumberChange}/></div>\r\n            <div><button type=\"submit\">add</button></div>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({ person, handleDeleteButton }) => {\r\n    return (\r\n        <p>{person.name} {person.number} {' '}<button onClick={handleDeleteButton}>delete</button></p>\r\n    )\r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (newObject, id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst updateNumber = (newObject, id) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    remove,\r\n    updateNumber\r\n}","import React from 'react'\r\n\r\nconst Notification = ({ successMessage }) => {\r\n    if(successMessage === null) {\r\n        return null\r\n    }\r\n\r\n        return (\r\n            <div className=\"success\">\r\n                {successMessage}\r\n            </div>\r\n        )\r\n    \r\n}\r\n\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst ErrorNoti = ({ errorMessage }) => {\r\n    if(errorMessage === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {errorMessage}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default ErrorNoti","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport ErrorNoti from './components/ErrorNoti'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterName, setFilterName ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ successMessage, setSuccessMessage ] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPerson => {\n        setPersons(initialPerson)\n      })\n      .catch(err => {\n        console.log('error', err)\n      })\n  } , [])\n \n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase()) )\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    \n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n    const found = persons.find(person => person.name === newPerson.name)\n    \n    if(found) {\n      const result = window.confirm(`${newPerson.name} is already added to the phonebook, replace the old number with a new one?`)\n      if(result) {\n        personService\n          .updateNumber(newPerson, found.id)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== found.id ? person : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n            setSuccessMessage(`Added ${returnedPerson.name}`)\n          })\n          .catch(error => {\n            setErrorMessage(error.response.data.error)\n            setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          })\n\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n        return\n      }\n    }\n    personService\n      .create(newPerson)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setSuccessMessage(`Added ${returnedPerson.name}`)\n\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n       // console.log(\"Frontend error is this: \", error.response.data.error)\n \n        setErrorMessage(error.response.data.error)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n        \n      })\n  }\n\n  const handlePersonChange = (event) => {\n    persons.forEach((person) => {\n\n      if (person.name === event.target.value) {\n        alert(`${person.name} is already added to phonebook`)\n      }\n    })\n\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = event => setNewNumber(event.target.value)\n  const handleFilterChange = event => setFilterName(event.target.value)\n  const handleDeleteButton = (person, id) => {\n    const result = window.confirm(`Delete ${person.name} ?`)\n    if(result) {\n      personService\n        .remove(person, id)\n        .then(setPersons(persons.filter((p) => p.id !== id)))\n        .catch(error => {\n          setErrorMessage(`Information of ${person.name} has already been removed from server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification successMessage={successMessage} />\n      <ErrorNoti errorMessage={errorMessage} />\n      <Filter value={filterName} onChange={handleFilterChange}/>\n      <h2>add a new</h2>\n      <PersonForm onSubmit = {addPerson} nameValue={newName} numberValue={newNumber} \n        onNameChange={handlePersonChange} onNumberChange={handleNumberChange}/>\n      <h2>Numbers</h2>\n      {personsToShow.map((person) => \n        <Persons\n          key={person.id} \n          person={person}\n          handleDeleteButton={() => handleDeleteButton(person, person.id)}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}